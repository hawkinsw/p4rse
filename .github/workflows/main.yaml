on: [push, pull_request]

name: Continuous Integration

jobs:
  grammar-tests:
    name: Grammar Tests
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./tree-sitter-p4
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v4
      - uses: tree-sitter/setup-action@v2
        with:
          install-cli: true
      - working-directory: ./tree-sitter-p4
        shell: sh
        run: pwd && ls
      - uses: tree-sitter/parser-test-action@v3
        with:
          generate: false
          working-directory: ./tree-sitter-p4
          test-parser-cmd: pwd
